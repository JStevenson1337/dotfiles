
<!-- saved from url=(0078)https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="color-scheme" content="light dark"></head><body><div class="line-gutter-backdrop"></div><form autocomplete="off"><label class="line-wrap-control">Line wrap<input type="checkbox" aria-label="Line wrap"></label></form><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-comment">&lt;!-- Generated from d4aa718 on 2024-03-05 @ 08:45 with Emacs 29.1 (Org mode 9.6.6) --&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span><span class="html-tag">&lt;html <span class="html-attribute-name">lang</span>="<span class="html-attribute-value">en</span>"&gt;</span><span class="html-tag">&lt;head&gt;</span><span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">utf-8</span>"/&gt;</span><span class="html-tag">&lt;meta <span class="html-attribute-name">author</span>="<span class="html-attribute-value">System Crafters - David Wilson</span>"/&gt;</span><span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">viewport</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">width=device-width, initial-scale=1, shrink-to-fit=no</span>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">icon</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">image/png</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/img/favicon.png" rel="noreferrer noopener">/img/favicon.png</a>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">alternative</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">application/rss+xml</span>" <span class="html-attribute-name">title</span>="<span class="html-attribute-value">System Crafters News</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/rss/news.xml" rel="noreferrer noopener">/rss/news.xml</a>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/fonts/iosevka-aile/iosevka-aile.css" rel="noreferrer noopener">/fonts/iosevka-aile/iosevka-aile.css</a>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/fonts/jetbrains-mono/jetbrains-mono.css" rel="noreferrer noopener">/fonts/jetbrains-mono/jetbrains-mono.css</a>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/css/code.css" rel="noreferrer noopener">/css/code.css</a>"/&gt;</span><span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/css/site.css" rel="noreferrer noopener">/css/site.css</a>"/&gt;</span><span class="html-tag">&lt;script <span class="html-attribute-name">defer</span>="<span class="html-attribute-value">defer</span>" <span class="html-attribute-name">data-domain</span>="<span class="html-attribute-value">systemcrafters.net</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://plausible.io/js/plausible.js" rel="noreferrer noopener">https://plausible.io/js/plausible.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span><span class="html-tag">&lt;title&gt;</span>Managing Files and Directories in Practice - System Crafters<span class="html-tag">&lt;/title&gt;</span><span class="html-tag">&lt;/head&gt;</span><span class="html-tag">&lt;body&gt;</span><span class="html-tag">&lt;header <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-header</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">container</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-title</span>"&gt;</span><span class="html-tag">&lt;img <span class="html-attribute-name">class</span>="<span class="html-attribute-value">logo</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/img/sc_logo.png" rel="noreferrer noopener">/img/sc_logo.png</a>" <span class="html-attribute-name">alt</span>="<span class="html-attribute-value">System Crafters</span>"/&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-masthead</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">container</span>"&gt;</span><span class="html-tag">&lt;nav <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav</span>"&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/" rel="noreferrer noopener">/</a>"&gt;</span>Home<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/guides/" rel="noreferrer noopener">/guides/</a>"&gt;</span>Guides<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/courses/" rel="noreferrer noopener">/courses/</a>"&gt;</span>Courses<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/news/" rel="noreferrer noopener">/news/</a>"&gt;</span>News<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/community/" rel="noreferrer noopener">/community/</a>"&gt;</span>Community<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://store.systemcrafters.net/?utm_source=sc-site-nav" rel="noreferrer noopener">https://store.systemcrafters.net?utm_source=sc-site-nav</a>"&gt;</span>Store<span class="html-tag">&lt;/a&gt;</span> <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">nav-link</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/how-to-help/" rel="noreferrer noopener">/how-to-help/</a>"&gt;</span>How to Help<span class="html-tag">&lt;/a&gt;</span><span class="html-tag">&lt;/nav&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/header&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">container</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-post</span>"&gt;</span><span class="html-tag">&lt;h1 <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-post-title</span>"&gt;</span>Managing Files and Directories in Practice<span class="html-tag">&lt;/h1&gt;</span><span class="html-tag">&lt;p <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-post-meta</span>"&gt;</span><span class="html-tag">&lt;/p&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">id</span>="<span class="html-attribute-value">content</span>"&gt;</span><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">video</span>"&gt;</span>  <span class="html-tag">&lt;iframe <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://www.youtube.com/embed/nq-gqNGmayI" rel="noreferrer noopener">https://www.youtube.com/embed/nq-gqNGmayI</a>" <span class="html-attribute-name">allowfullscreen</span>&gt;</span><span class="html-tag">&lt;/iframe&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="6"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">what-will-we-cover</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#what-will-we-cover" rel="noreferrer noopener">#what-will-we-cover</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>What will we cover?<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org5a56561</span>"&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="8"></td><td class="line-content">Today we&amp;rsquo;re going to talk about the many ways you can interact with files and directories using Emacs Lisp!</td></tr><tr><td class="line-number" value="9"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="10"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="11"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="12"></td><td class="line-content">There are a few different ways to do this with user-facing Emacs functionality (<span class="html-tag">&lt;code&gt;</span>find-file<span class="html-tag">&lt;/code&gt;</span>, <span class="html-tag">&lt;code&gt;</span>eshell<span class="html-tag">&lt;/code&gt;</span>, Dired, etc), but at some point you will want to automate some of these tasks with Emacs Lisp code.</td></tr><tr><td class="line-number" value="13"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="15"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="16"></td><td class="line-content">Today I&amp;rsquo;ll show you a wide range of the functions you have at your disposal and then use them in real code examples!</td></tr><tr><td class="line-number" value="17"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="18"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="19"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="20"></td><td class="line-content">The final code from this episode can be found <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/daviwil/dotcrafter.el/blob/8589c71e64b60f9395b418c09b60815a86c7da8f/dotcrafter.el" rel="noreferrer noopener">https://github.com/daviwil/dotcrafter.el/blob/8589c71e64b60f9395b418c09b60815a86c7da8f/dotcrafter.el</a>"&gt;</span>on GitHub<span class="html-tag">&lt;/a&gt;</span>.</td></tr><tr><td class="line-number" value="21"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="22"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="23"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="24"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">explaining-symbolic-links</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#explaining-symbolic-links" rel="noreferrer noopener">#explaining-symbolic-links</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Explaining symbolic links<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orgd220326</span>"&gt;</span></td></tr><tr><td class="line-number" value="25"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="26"></td><td class="line-content">But first, what is a symbolic link?</td></tr><tr><td class="line-number" value="27"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="28"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="29"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="30"></td><td class="line-content">It is an entry in the file system that points to a file or directory somewhere else in the file system.  It is used to make it appear like a directory exists at <span class="html-tag">&lt;code&gt;</span>~/.emacs.d<span class="html-tag">&lt;/code&gt;</span> when it actually exists at <span class="html-tag">&lt;code&gt;</span>~/.dotfiles/.emacs.d<span class="html-tag">&lt;/code&gt;</span>!</td></tr><tr><td class="line-number" value="31"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="32"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="33"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="34"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">our-project-dotcrafterel</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#our-project-dotcrafterel" rel="noreferrer noopener">#our-project-dotcrafterel</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Our project: dotcrafter.el<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org2c70f0b</span>"&gt;</span></td></tr><tr><td class="line-number" value="35"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="36"></td><td class="line-content">As we talked about in previous videos in this series, we are working on a dotfiles management package for Emacs.</td></tr><tr><td class="line-number" value="37"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="38"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="39"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="40"></td><td class="line-content">In this video we&amp;rsquo;re going to add functionality to create symbolic links for your configuration files into the real locations where they belong in the home directory!</td></tr><tr><td class="line-number" value="41"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="42"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="43"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="44"></td><td class="line-content">Some context:</td></tr><tr><td class="line-number" value="45"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="46"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="47"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>We&amp;rsquo;ve been focused on dotfiles generated from Org Mode files<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="48"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>You&amp;rsquo;ll probably also have configuration files that don&amp;rsquo;t belong in Org files!<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="49"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>We need a way to automatically link those configuration files into the home directory<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="50"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>We will implement code to &amp;ldquo;mirror&amp;rdquo; your configuration files into the home directory using symbolic links<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="51"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="52"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="53"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="54"></td><td class="line-content">By the end of this episode, we&amp;rsquo;ll have a fully working dotfiles management package!</td></tr><tr><td class="line-number" value="55"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="56"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="57"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="58"></td><td class="line-content">We&amp;rsquo;ll commit improvements made in this video to the GitHub repository: <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/daviwil/dotcrafter.el" rel="noreferrer noopener">https://github.com/daviwil/dotcrafter.el</a>"&gt;</span>https://github.com/daviwil/dotcrafter.el<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="59"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="60"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="61"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="62"></td><td class="line-content">The starting point of the examples in this episode is <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/daviwil/dotcrafter.el/blob/0374d5a1ad1e5ecadcdfbdf07e0ae428946b0138/dotcrafter.el" rel="noreferrer noopener">https://github.com/daviwil/dotcrafter.el/blob/0374d5a1ad1e5ecadcdfbdf07e0ae428946b0138/dotcrafter.el</a>"&gt;</span>this version of dotcrafter.el<span class="html-tag">&lt;/a&gt;</span> from the repository.</td></tr><tr><td class="line-number" value="63"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="64"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="65"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">cta center</span>"&gt;</span></td></tr><tr><td class="line-number" value="66"></td><td class="line-content">If you find this guide helpful, please consider supporting System Crafters via the links on the <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/how-to-help/#support-my-work" rel="noreferrer noopener">/how-to-help/#support-my-work</a>"&gt;</span>How to Help<span class="html-tag">&lt;/a&gt;</span> page!</td></tr><tr><td class="line-number" value="67"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="68"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="69"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="70"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">getting-the-current-directory</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#getting-the-current-directory" rel="noreferrer noopener">#getting-the-current-directory</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Getting the current directory<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org35bbf53</span>"&gt;</span></td></tr><tr><td class="line-number" value="71"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="72"></td><td class="line-content">Emacs will resolve most file paths relative to the current directory which is determine by the variable <span class="html-tag">&lt;code&gt;</span>default-directory<span class="html-tag">&lt;/code&gt;</span>.  This buffer-local variable will be different for each buffer you open.</td></tr><tr><td class="line-number" value="73"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="74"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="75"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="76"></td><td class="line-content">For file buffers, it will contain the directory where the buffer&amp;rsquo;s file lives:</td></tr><tr><td class="line-number" value="77"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="78"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="79"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>default-directory<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="80"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="81"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="82"></td><td class="line-content">What about the <span class="html-tag">&lt;code&gt;</span>*scratch*<span class="html-tag">&lt;/code&gt;</span> buffer?  It <span class="html-tag">&lt;i&gt;</span>probably<span class="html-tag">&lt;/i&gt;</span> returns the directory where Emacs was launched from!</td></tr><tr><td class="line-number" value="83"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="84"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="85"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="86"></td><td class="line-content">You can also change <span class="html-tag">&lt;code&gt;</span>default-directory<span class="html-tag">&lt;/code&gt;</span> if necessary!</td></tr><tr><td class="line-number" value="87"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="88"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="89"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="90"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Names.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Names.html</a>"&gt;</span>Emacs Manual: File Names<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="91"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="92"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="93"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="94"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">manipulating-file-paths</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#manipulating-file-paths" rel="noreferrer noopener">#manipulating-file-paths</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Manipulating file paths<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org90eb5ee</span>"&gt;</span></td></tr><tr><td class="line-number" value="95"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="96"></td><td class="line-content">When you want to automate file operations in Emacs, you&amp;rsquo;ll often need to grab different parts of a path so that you can build new paths.  There are a few functions for this purpose!</td></tr><tr><td class="line-number" value="97"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="98"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="99"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="100"></td><td class="line-content">In Emacs, file paths are considered to have two parts:</td></tr><tr><td class="line-number" value="101"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="102"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="103"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="104"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>The directory part<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="105"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>The non-directory part, i.e. the file name and its extension<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="106"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="107"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="108"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="109"></td><td class="line-content">The functions you will want to use for this purpose are all prefixed with <span class="html-tag">&lt;code&gt;</span>file-name<span class="html-tag">&lt;/code&gt;</span>!</td></tr><tr><td class="line-number" value="110"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="111"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="112"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="113"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-directory<span class="html-tag">&lt;/code&gt;</span>: Get the directory part of a file path<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="114"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-nondirectory<span class="html-tag">&lt;/code&gt;</span>: Get the filename (non-directory) part of a file path<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="115"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-extension<span class="html-tag">&lt;/code&gt;</span>: Get the extension of the file (without the leading period <span class="html-tag">&lt;code&gt;</span>.<span class="html-tag">&lt;/code&gt;</span>)<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="116"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-sans-extension<span class="html-tag">&lt;/code&gt;</span>: Get the path without the file extension<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="117"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-base<span class="html-tag">&lt;/code&gt;</span>: Get the base file name without path or extension<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="118"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-as-directory<span class="html-tag">&lt;/code&gt;</span>: Turn the file name into a directory name<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="119"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="120"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="121"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="122"></td><td class="line-content">NOTE: The file paths you pass to these functions do not have to exist!</td></tr><tr><td class="line-number" value="123"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="124"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="125"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(file-name-directory (buffer-file-name))</td></tr><tr><td class="line-number" value="126"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="127"></td><td class="line-content">(file-name-nondirectory (buffer-file-name))</td></tr><tr><td class="line-number" value="128"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="129"></td><td class="line-content">(file-name-extension (buffer-file-name))</td></tr><tr><td class="line-number" value="130"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="131"></td><td class="line-content">(file-name-sans-extension (buffer-file-name))</td></tr><tr><td class="line-number" value="132"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="133"></td><td class="line-content">(file-name-base (buffer-file-name))</td></tr><tr><td class="line-number" value="134"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="135"></td><td class="line-content">(file-name-as-directory (buffer-file-name))</td></tr><tr><td class="line-number" value="136"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="137"></td><td class="line-content">(file-name-as-directory</td></tr><tr><td class="line-number" value="138"></td><td class="line-content"> (file-name-sans-extension (buffer-file-name)))<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="139"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="140"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="141"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Names.html#File-Names" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Names.html#File-Names</a>"&gt;</span>Emacs Lisp Manual: File Names<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="142"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="143"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="144"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="145"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">resolving-file-paths</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#resolving-file-paths" rel="noreferrer noopener">#resolving-file-paths</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Resolving file paths<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org01c6d1a</span>"&gt;</span></td></tr><tr><td class="line-number" value="146"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="147"></td><td class="line-content">It is a good idea to resolve file paths any time you use them to ensure they are being used for the location you expect!</td></tr><tr><td class="line-number" value="148"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="149"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="150"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="151"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-name-absolute-p<span class="html-tag">&lt;/code&gt;</span> will tell you whether a file name is &amp;ldquo;absolute&amp;rdquo;: it contains a complete file system path<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="152"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-relative-name<span class="html-tag">&lt;/code&gt;</span> with give you the path of a file relative to another path<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="153"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>expand-file-name<span class="html-tag">&lt;/code&gt;</span> will return an absolute path for a file under a specified directory<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="154"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="155"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="156"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(file-name-absolute-p (buffer-file-name))      <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>t<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="157"></td><td class="line-content">(file-name-absolute-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Emacs-Lisp-06.org"<span class="html-tag">&lt;/span&gt;</span>)     <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>nil<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="158"></td><td class="line-content">(file-name-absolute-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"dir/Emacs-Lisp-06.org"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>nil<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="159"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="160"></td><td class="line-content">(file-relative-name (buffer-file-name) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/Notes"<span class="html-tag">&lt;/span&gt;</span>)     <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Streams/Emacs-Lisp-06.org<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="161"></td><td class="line-content">(file-relative-name (buffer-file-name) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="162"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>../Notes/Streams/Emacs-Lisp-06.org<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="163"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="164"></td><td class="line-content">(expand-file-name <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Emacs-Lisp-06.org"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>/home/daviwil/Notes/Streams/Emacs-Lisp-06.org<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="166"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="167"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>The file doesn't have to exist!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="168"></td><td class="line-content">(expand-file-name <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Emacs-Lisp-06.org"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>/home/daviwil/.dotfiles/Emacs-Lisp-06.org<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="170"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="171"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="172"></td><td class="line-content">What about resolving paths containing environment variables?</td></tr><tr><td class="line-number" value="173"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="174"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="175"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(expand-file-name <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"$HOME/.emacs.d"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="176"></td><td class="line-content">(substitute-in-file-name <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"$HOME/.emacs.d"<span class="html-tag">&lt;/span&gt;</span>)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="177"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="178"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="179"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Relative-File-Names.html#Relative-File-Names" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/Relative-File-Names.html#Relative-File-Names</a>"&gt;</span>Emacs Lisp Manual: Absolute and Relative File Names<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="180"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Expansion.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Expansion.html</a>"&gt;</span>Emacs Lisp Manual: Functions that Expand Filenames<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="181"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="182"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="183"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="184"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">example-resolving-the-destination-path-of-a-configuration-file</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#example-resolving-the-destination-path-of-a-configuration-file" rel="noreferrer noopener">#example-resolving-the-destination-path-of-a-configuration-file</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Example: Resolving the destination path of a configuration file<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orge2a4154</span>"&gt;</span></td></tr><tr><td class="line-number" value="185"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="186"></td><td class="line-content">We can use a few of the functions we just discussed to find where a file inside of the dotfiles folder should be linked in the home directory!</td></tr><tr><td class="line-number" value="187"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="188"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="189"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="190"></td><td class="line-content">Here&amp;rsquo;s what we need to do:</td></tr><tr><td class="line-number" value="191"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="192"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="193"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="194"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>Resolve the relative path of a file under the dotfiles folder relative to the dotfiles folder<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="195"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>Resolve that relative path against the home directory (or more specifically the output directory)<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="196"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="197"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="198"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="199"></td><td class="line-content">For example:</td></tr><tr><td class="line-number" value="200"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="201"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="202"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>~/.dotfiles/.files/</td></tr><tr><td class="line-number" value="203"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="204"></td><td class="line-content">~/.dotfiles/.files/.local/share/applications/Emacs.desktop</td></tr><tr><td class="line-number" value="205"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="206"></td><td class="line-content">  Resolve to --&amp;gt;   .local/share/applications/Emacs.desktop</td></tr><tr><td class="line-number" value="207"></td><td class="line-content">  Resolve to --&amp;gt; ~/.local/share/applications/Emacs.desktop<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="208"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="209"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="210"></td><td class="line-content">We&amp;rsquo;re also going to define a variable that holds the specific subpath of the dotfiles folder where these linked configuration files should live so that they&amp;rsquo;re easier to manage.</td></tr><tr><td class="line-number" value="211"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="212"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="213"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defcustom<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-variable-name</span>"&gt;</span>dotcrafter-dotfiles-folder<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="214"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"The folder where dotfiles and org-mode configuration files are stored."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="215"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:type<span class="html-tag">&lt;/span&gt;</span> 'string</td></tr><tr><td class="line-number" value="216"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:group<span class="html-tag">&lt;/span&gt;</span> 'dotfiles)</td></tr><tr><td class="line-number" value="217"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="218"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defcustom<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-variable-name</span>"&gt;</span>dotcrafter-output-directory<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="219"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"The directory where dotcrafter.el will write out your dotfiles.<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="220"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>This is typically set to the home directory but can be changed<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="221"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>for testing purposes."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="222"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:type<span class="html-tag">&lt;/span&gt;</span> 'string</td></tr><tr><td class="line-number" value="223"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:group<span class="html-tag">&lt;/span&gt;</span> 'dotfiles)</td></tr><tr><td class="line-number" value="224"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="225"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defcustom<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-variable-name</span>"&gt;</span>dotcrafter-config-files-directory<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".files"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="226"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"The directory path inside of `<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-constant</span>"&gt;</span>dotcrafter-dotfiles-folder<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>' where<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="227"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>configuration files that should be symbolically linked are stored."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="228"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:type<span class="html-tag">&lt;/span&gt;</span> 'string</td></tr><tr><td class="line-number" value="229"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:group<span class="html-tag">&lt;/span&gt;</span> 'dotfiles)</td></tr><tr><td class="line-number" value="230"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="231"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> dotcrafter-dotfiles-folder <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/Projects/Code/dotcrafter.el/example"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="232"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> dotcrafter-output-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/Projects/Code/dotcrafter.el/demo-output"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="233"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="234"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>dotcrafter--resolve-config-files-path<span class="html-tag">&lt;/span&gt;</span> ()</td></tr><tr><td class="line-number" value="235"></td><td class="line-content">  (expand-file-name dotcrafter-config-files-directory</td></tr><tr><td class="line-number" value="236"></td><td class="line-content">                    dotcrafter-dotfiles-folder))</td></tr><tr><td class="line-number" value="237"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="238"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>example--resolve-config-file-target<span class="html-tag">&lt;/span&gt;</span> (config-file)</td></tr><tr><td class="line-number" value="239"></td><td class="line-content">  (expand-file-name</td></tr><tr><td class="line-number" value="240"></td><td class="line-content">   (file-relative-name</td></tr><tr><td class="line-number" value="241"></td><td class="line-content">    (expand-file-name config-file)</td></tr><tr><td class="line-number" value="242"></td><td class="line-content">    (dotcrafter--resolve-config-files-path))</td></tr><tr><td class="line-number" value="243"></td><td class="line-content">   dotcrafter-output-directory))</td></tr><tr><td class="line-number" value="244"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="245"></td><td class="line-content">(example--resolve-config-file-target <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/Projects/Code/dotcrafter/example/.files/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span>)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="246"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="247"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="248"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">checking-if-files-and-directories-exist</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#checking-if-files-and-directories-exist" rel="noreferrer noopener">#checking-if-files-and-directories-exist</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Checking if files and directories exist<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orgc224a73</span>"&gt;</span></td></tr><tr><td class="line-number" value="249"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="250"></td><td class="line-content">The <span class="html-tag">&lt;code&gt;</span>file-exists-p<span class="html-tag">&lt;/code&gt;</span> function returns <span class="html-tag">&lt;code&gt;</span>t<span class="html-tag">&lt;/code&gt;</span> if a file or directory exists or <span class="html-tag">&lt;code&gt;</span>nil<span class="html-tag">&lt;/code&gt;</span> otherwise:</td></tr><tr><td class="line-number" value="251"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="252"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="253"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(file-exists-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/.emacs.d"<span class="html-tag">&lt;/span&gt;</span>)  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>t<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="254"></td><td class="line-content">(file-exists-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/foobar"<span class="html-tag">&lt;/span&gt;</span>)    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>nil<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="255"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="256"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="257"></td><td class="line-content">There are a few more functions that you can use to check if the user has access to a file, whether its writable or executable, etc:</td></tr><tr><td class="line-number" value="258"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="259"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="260"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="261"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-readable-p<span class="html-tag">&lt;/code&gt;</span><span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="262"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-executable-p<span class="html-tag">&lt;/code&gt;</span><span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="263"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>file-writable-p<span class="html-tag">&lt;/code&gt;</span><span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="264"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="265"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="266"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="267"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Testing-Accessibility.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/Testing-Accessibility.html</a>"&gt;</span>Emacs Lisp Manual: Testing Accessibility<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="268"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="269"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="270"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="271"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">creating-directories</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#creating-directories" rel="noreferrer noopener">#creating-directories</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Creating directories<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org5e8ccbd</span>"&gt;</span></td></tr><tr><td class="line-number" value="272"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="273"></td><td class="line-content">You can easily create a directory with the <span class="html-tag">&lt;code&gt;</span>make-directory<span class="html-tag">&lt;/code&gt;</span> command.</td></tr><tr><td class="line-number" value="274"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="275"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="276"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="277"></td><td class="line-content">The first parameter is the path to the directory to be created and the second is an optional boolean (<span class="html-tag">&lt;code&gt;</span>t<span class="html-tag">&lt;/code&gt;</span> or <span class="html-tag">&lt;code&gt;</span>nil<span class="html-tag">&lt;/code&gt;</span>) which determines whether any missing parent directories in the path should also be created.</td></tr><tr><td class="line-number" value="278"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="279"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="280"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="281"></td><td class="line-content">You can also set the second parameter to <span class="html-tag">&lt;code&gt;</span>t<span class="html-tag">&lt;/code&gt;</span> to ensure that <span class="html-tag">&lt;code&gt;</span>make-directory<span class="html-tag">&lt;/code&gt;</span> won&amp;rsquo;t throw an error if the directory already exists!</td></tr><tr><td class="line-number" value="282"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="283"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="284"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(make-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.local/share/foobar"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="285"></td><td class="line-content">(make-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.local/share/foobar"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>throws an error<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="286"></td><td class="line-content">(make-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.local/share/foobar"<span class="html-tag">&lt;/span&gt;</span> t) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>no error!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="287"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="288"></td><td class="line-content">(make-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.local/share/hello/system/crafters"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>error<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="289"></td><td class="line-content">(make-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.local/share/hello/system/crafters"<span class="html-tag">&lt;/span&gt;</span> t) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>success!<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="290"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="291"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="292"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Create_002fDelete-Dirs.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/Create_002fDelete-Dirs.html</a>"&gt;</span>Emacs Lisp Manual: Creating, Copying, and Deleting Directories<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="293"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="294"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="295"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="296"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">example-creating-expected-directories-before-linking</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#example-creating-expected-directories-before-linking" rel="noreferrer noopener">#example-creating-expected-directories-before-linking</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Example: Creating expected directories before linking<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orgc687936</span>"&gt;</span></td></tr><tr><td class="line-number" value="297"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="298"></td><td class="line-content">When we begin creating symbolic links into the home directory, one thing we will need to be careful of is creating symbolic links too close to the home directory for commonly-used folders like <span class="html-tag">&lt;code&gt;</span>~/.config<span class="html-tag">&lt;/code&gt;</span> or <span class="html-tag">&lt;code&gt;</span>~/.local/share<span class="html-tag">&lt;/code&gt;</span>.</td></tr><tr><td class="line-number" value="299"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="300"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="301"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="302"></td><td class="line-content">What we want to avoid is creating a symlink for these folders to our dotfiles folder and then having a bunch of unwanted files show up there that we must add to our <span class="html-tag">&lt;code&gt;</span>.gitignore<span class="html-tag">&lt;/code&gt;</span>!</td></tr><tr><td class="line-number" value="303"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="304"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="305"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="306"></td><td class="line-content">The solution here is to make sure that these directories already exist so that the algorithm we will write later won&amp;rsquo;t try to create symbolic links instead.  To accomplish this, we will create a new variable to hold the list of directories to be pre-created and then create those directories before we start the linking process:</td></tr><tr><td class="line-number" value="307"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="308"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="309"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defcustom<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-variable-name</span>"&gt;</span>dotcrafter-ensure-output-directories<span class="html-tag">&lt;/span&gt;</span> '(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".config"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".local/share"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="310"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"List of directories in the output folder that should be created<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="311"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>before linking configuration files."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="312"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:type<span class="html-tag">&lt;/span&gt;</span>  '(list string)</td></tr><tr><td class="line-number" value="313"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-builtin</span>"&gt;</span>:group<span class="html-tag">&lt;/span&gt;</span> 'dotfiles)</td></tr><tr><td class="line-number" value="314"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="315"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>example--ensure-output-directories<span class="html-tag">&lt;/span&gt;</span> ()</td></tr><tr><td class="line-number" value="316"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Ensure that the expected output directories are already<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="317"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>created so that links will be created inside<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="318"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>dolist<span class="html-tag">&lt;/span&gt;</span> (dir dotcrafter-ensure-output-directories)</td></tr><tr><td class="line-number" value="319"></td><td class="line-content">    (make-directory (expand-file-name dir dotcrafter-output-directory) t)))</td></tr><tr><td class="line-number" value="320"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="321"></td><td class="line-content">(example--ensure-output-directories)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="322"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="323"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="324"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">listing-files-in-directories</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#listing-files-in-directories" rel="noreferrer noopener">#listing-files-in-directories</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Listing files in directories<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org813c8ea</span>"&gt;</span></td></tr><tr><td class="line-number" value="325"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="326"></td><td class="line-content">One thing you will probably want to do at some point is get a list of files in a given directory, possibly even for all child directories under that path as well.</td></tr><tr><td class="line-number" value="327"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="328"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="329"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="330"></td><td class="line-content">The <span class="html-tag">&lt;code&gt;</span>directory-files<span class="html-tag">&lt;/code&gt;</span> and <span class="html-tag">&lt;code&gt;</span>directory-files-recursively<span class="html-tag">&lt;/code&gt;</span> functions are great for this purpose!</td></tr><tr><td class="line-number" value="331"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="332"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="333"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(directory-files <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="334"></td><td class="line-content">(directory-files <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span> t)          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Return full file paths<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="335"></td><td class="line-content">(directory-files <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span> t <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".org"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Get all file containing ".org"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="336"></td><td class="line-content">(directory-files <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span> t <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span> t)     <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Don't sort results<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="337"></td><td class="line-content">(directory-files <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span> t <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span> nil 3) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Maximum 3 results<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="338"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="339"></td><td class="line-content">(directory-files-recursively <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"\\.el$"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="340"></td><td class="line-content">(directory-files-recursively dotcrafter-output-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="341"></td><td class="line-content">(directory-files-recursively dotcrafter-output-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span> t)</td></tr><tr><td class="line-number" value="342"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="343"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>The fourth parameter can be a function that determines whether<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="344"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>a path can be traversed using any logic!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="345"></td><td class="line-content">(directory-files-recursively <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span> nil</td></tr><tr><td class="line-number" value="346"></td><td class="line-content">                             (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>lambda<span class="html-tag">&lt;/span&gt;</span> (dir)</td></tr><tr><td class="line-number" value="347"></td><td class="line-content">                               (string-equal dir <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/lisp"<span class="html-tag">&lt;/span&gt;</span>)))</td></tr><tr><td class="line-number" value="348"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="349"></td><td class="line-content">(directory-files-recursively <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.config"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"\\.scm"<span class="html-tag">&lt;/span&gt;</span> t nil nil) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Doesn't follow symlinks<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="350"></td><td class="line-content">(directory-files-recursively <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.config"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"\\.scm"<span class="html-tag">&lt;/span&gt;</span> t nil t)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Follows symlinks!<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="351"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="352"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="353"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Contents-of-Directories.html#Contents-of-Directories" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/Contents-of-Directories.html#Contents-of-Directories</a>"&gt;</span>Emacs Lisp Manual: Contents of Directories<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="354"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="355"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="356"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="357"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">example-finding-the-list-of-all-configuration-files-to-be-linked</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#example-finding-the-list-of-all-configuration-files-to-be-linked" rel="noreferrer noopener">#example-finding-the-list-of-all-configuration-files-to-be-linked</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Example: Finding the list of all configuration files to be linked<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orgb0de896</span>"&gt;</span></td></tr><tr><td class="line-number" value="358"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="359"></td><td class="line-content">As we talked about earlier, the goal of what we&amp;rsquo;re doing today is to produce some code that will mirror a folder of configuration files in your dotfiles folder into the home folder using symbolic links.</td></tr><tr><td class="line-number" value="360"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="361"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="362"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="363"></td><td class="line-content">We&amp;rsquo;ll use the <span class="html-tag">&lt;code&gt;</span>directory-files-recursively<span class="html-tag">&lt;/code&gt;</span> function to list all of the linkable files under the dotfiles path and then resolve them relative to the output path!</td></tr><tr><td class="line-number" value="364"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="365"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="366"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>example--find-all-files-to-link<span class="html-tag">&lt;/span&gt;</span> ()</td></tr><tr><td class="line-number" value="367"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>let<span class="html-tag">&lt;/span&gt;</span> ((files-to-link</td></tr><tr><td class="line-number" value="368"></td><td class="line-content">         (directory-files-recursively</td></tr><tr><td class="line-number" value="369"></td><td class="line-content">          (dotcrafter--resolve-config-files-path)</td></tr><tr><td class="line-number" value="370"></td><td class="line-content">          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span>)))</td></tr><tr><td class="line-number" value="371"></td><td class="line-content">    (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>dolist<span class="html-tag">&lt;/span&gt;</span> (file files-to-link)</td></tr><tr><td class="line-number" value="372"></td><td class="line-content">      (message <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"File: %s\n   - %s"<span class="html-tag">&lt;/span&gt;</span> file (example--resolve-config-file-target file)))))</td></tr><tr><td class="line-number" value="373"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="374"></td><td class="line-content">(example--find-all-files-to-link)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="375"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="376"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="377"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">copying-moving-and-deleting-files-and-directories</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#copying-moving-and-deleting-files-and-directories" rel="noreferrer noopener">#copying-moving-and-deleting-files-and-directories</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Copying, moving, and deleting files and directories<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org1b066a4</span>"&gt;</span></td></tr><tr><td class="line-number" value="378"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="379"></td><td class="line-content">You can perform common file management tasks like copying, moving, and deleting files and directories with a few different Emacs Lisp functions.</td></tr><tr><td class="line-number" value="380"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="381"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="382"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="383"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Copying-and-Naming.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/emacs/Copying-and-Naming.html</a>"&gt;</span>Emacs Lisp Manual: Copying, Naming, and Renaming Files<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="384"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Create_002fDelete-Dirs.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/elisp/Create_002fDelete-Dirs.html</a>"&gt;</span>Emacs Lisp Manual: Creating, Copying, and Deleting Directories<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="385"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="386"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="387"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="388"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">copying</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#copying" rel="noreferrer noopener">#copying</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Copying<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org04620f6</span>"&gt;</span></td></tr><tr><td class="line-number" value="389"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="390"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>copy-file<span class="html-tag">&lt;/code&gt;</span>: Copy the contents of one file to another<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="391"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>copy-directory<span class="html-tag">&lt;/code&gt;</span>: Copy the contents of one directory to another, including all subdirectories<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="392"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="393"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="394"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(copy-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp"<span class="html-tag">&lt;/span&gt;</span>)  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Must end in a slash!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="395"></td><td class="line-content">(copy-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Copied to /tmp<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="396"></td><td class="line-content">(copy-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Error, already exists!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="397"></td><td class="line-content">(copy-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/"<span class="html-tag">&lt;/span&gt;</span> t) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>No error!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="398"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>The remaining parameters are all about preserving file metadata<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="399"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="400"></td><td class="line-content">(copy-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/lisp"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp"<span class="html-tag">&lt;/span&gt;</span>)  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Must end in a slash!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="401"></td><td class="line-content">(copy-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/lisp"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Copied to /tmp/lisp<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="402"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="403"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>To copy the contents of the directory without the enclosing directory:<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="404"></td><td class="line-content">(copy-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/eshell"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span> t t nil)</td></tr><tr><td class="line-number" value="405"></td><td class="line-content">(copy-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/eshell"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span> t t t)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="406"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="407"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="408"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">renaming--moving</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#renaming--moving" rel="noreferrer noopener">#renaming--moving</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Renaming / Moving<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-orgcc1db44</span>"&gt;</span></td></tr><tr><td class="line-number" value="409"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="410"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>rename-file<span class="html-tag">&lt;/code&gt;</span>: Rename a file or directory<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="411"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="412"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="413"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/init.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/init-new.el"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Rename file in same folder<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="414"></td><td class="line-content">(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/init-new.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/"<span class="html-tag">&lt;/span&gt;</span>)  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Move file to different folder<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="415"></td><td class="line-content">(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init-new.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Error!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="416"></td><td class="line-content">(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init-new.el"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span> t) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>OK<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="417"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="418"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>It can also rename or move directories!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="419"></td><td class="line-content">(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp-two"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>OK<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="420"></td><td class="line-content">(rename-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp-two"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>OK<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="421"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="422"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="423"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">deleting</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#deleting" rel="noreferrer noopener">#deleting</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Deleting<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org8f49d74</span>"&gt;</span></td></tr><tr><td class="line-number" value="424"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="425"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>delete-file<span class="html-tag">&lt;/code&gt;</span>: Delete a file, optionally moving it to the trash folder<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="426"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>delete-directory<span class="html-tag">&lt;/code&gt;</span>: Deletes a directory, including files if desired<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="427"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="428"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="429"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(delete-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp/dw-desktop.el"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="430"></td><td class="line-content">(delete-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.npmrc"<span class="html-tag">&lt;/span&gt;</span> t)</td></tr><tr><td class="line-number" value="431"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="432"></td><td class="line-content">(delete-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="433"></td><td class="line-content">(delete-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/tmp/lisp"<span class="html-tag">&lt;/span&gt;</span> t)<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="434"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="435"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="436"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">example-migrating-configuration-files-to-the-dotfiles-folder</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#example-migrating-configuration-files-to-the-dotfiles-folder" rel="noreferrer noopener">#example-migrating-configuration-files-to-the-dotfiles-folder</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Example: Migrating configuration files to the dotfiles folder<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org517d20b</span>"&gt;</span></td></tr><tr><td class="line-number" value="437"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="438"></td><td class="line-content">As we continue building our configurations, it&amp;rsquo;s likely that we&amp;rsquo;ll want to migrate a configuration folder into our dotfiles repository.  Let&amp;rsquo;s define a function that will make this really easy for the user:</td></tr><tr><td class="line-number" value="439"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="440"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="441"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="442"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>The user chooses a folder to move into their dotfiles configuration<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="443"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>We ensure that the chosen file is located under the home directory (<span class="html-tag">&lt;code&gt;</span>dotcrafter-output-directory<span class="html-tag">&lt;/code&gt;</span>)<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="444"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>If so, move the file to the corresponding location under the config path<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="445"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="446"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="447"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Run this to feed the demo!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="448"></td><td class="line-content">(copy-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/.config/guix"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="449"></td><td class="line-content">                (file-name-as-directory (expand-file-name <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".config"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="450"></td><td class="line-content">                                                          dotcrafter-output-directory)))</td></tr><tr><td class="line-number" value="451"></td><td class="line-content">(copy-file <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/.bash_profile"<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="452"></td><td class="line-content">           (file-name-as-directory dotcrafter-output-directory))</td></tr><tr><td class="line-number" value="453"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="454"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>dotcrafter-move-to-config-files<span class="html-tag">&lt;/span&gt;</span> (source-path)</td></tr><tr><td class="line-number" value="455"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"Move a file from the output path to the configuration path."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="456"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>interactive<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"FConfiguration path to move: "<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="457"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>let*<span class="html-tag">&lt;/span&gt;</span> ((relative-path (file-relative-name (expand-file-name source-path)</td></tr><tr><td class="line-number" value="458"></td><td class="line-content">                                            dotcrafter-output-directory))</td></tr><tr><td class="line-number" value="459"></td><td class="line-content">         (dest-path (expand-file-name relative-path</td></tr><tr><td class="line-number" value="460"></td><td class="line-content">                                      (dotcrafter--resolve-config-files-path)))</td></tr><tr><td class="line-number" value="461"></td><td class="line-content">         <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Strip any trailing slash so that we can treat the directory as file<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="462"></td><td class="line-content">         (dest-path (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>if<span class="html-tag">&lt;/span&gt;</span> (string-suffix-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/"<span class="html-tag">&lt;/span&gt;</span> dest-path)</td></tr><tr><td class="line-number" value="463"></td><td class="line-content">                        (substring dest-path 0 -1)</td></tr><tr><td class="line-number" value="464"></td><td class="line-content">                      dest-path)))</td></tr><tr><td class="line-number" value="465"></td><td class="line-content">         <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Make sure that the path is under the output directory and that it<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="466"></td><td class="line-content">         <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>doesn't already exist<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="467"></td><td class="line-content">         (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>when<span class="html-tag">&lt;/span&gt;</span> (string-prefix-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>".."<span class="html-tag">&lt;/span&gt;</span> relative-path)</td></tr><tr><td class="line-number" value="468"></td><td class="line-content">           (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-warning</span>"&gt;</span>error<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Copied path is not inside of config output directory: %s"<span class="html-tag">&lt;/span&gt;</span> dotcrafter-output-directory))</td></tr><tr><td class="line-number" value="469"></td><td class="line-content">         (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>when<span class="html-tag">&lt;/span&gt;</span> (file-exists-p dest-path)</td></tr><tr><td class="line-number" value="470"></td><td class="line-content">           (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-warning</span>"&gt;</span>error<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Can't copy path because it already exists in the configuration directory: %s"<span class="html-tag">&lt;/span&gt;</span> dest-path))</td></tr><tr><td class="line-number" value="471"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="472"></td><td class="line-content">         <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Ensure that parent directories exist and then move the file!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="473"></td><td class="line-content">         (make-directory (file-name-directory dest-path) t)</td></tr><tr><td class="line-number" value="474"></td><td class="line-content">         (rename-file source-path dest-path)))</td></tr><tr><td class="line-number" value="475"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="476"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>TODO: Link this path back into the dotcrafter-output-directory<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="477"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="478"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="479"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">creating-symbolic-links</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#creating-symbolic-links" rel="noreferrer noopener">#creating-symbolic-links</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Creating symbolic links<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org3198989</span>"&gt;</span></td></tr><tr><td class="line-number" value="480"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="481"></td><td class="line-content">Using symbolic links, we&amp;rsquo;re able to keep our configuration files in a local Git repository and then make them appear in our home folder.</td></tr><tr><td class="line-number" value="482"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="483"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="484"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="485"></td><td class="line-content">Creating symbolic links is very easy in Emacs with the <span class="html-tag">&lt;code&gt;</span>make-symbolic-link<span class="html-tag">&lt;/code&gt;</span> function:</td></tr><tr><td class="line-number" value="486"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="487"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="488"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(make-symbolic-link <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/.config/guix"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.config/guix"<span class="html-tag">&lt;/span&gt;</span>)   <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Error if exists<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="489"></td><td class="line-content">(make-symbolic-link <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.dotfiles/.config/guix"<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.config/guix"<span class="html-tag">&lt;/span&gt;</span> t) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>No error!<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="490"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="491"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="492"></td><td class="line-content">However, this doesn&amp;rsquo;t work exactly the same on Windows!  You might need to run Emacs with elevation for it to work.</td></tr><tr><td class="line-number" value="493"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="494"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="495"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="496"></td><td class="line-content">You can also check if a file is a symbolic link using <span class="html-tag">&lt;code&gt;</span>file-symlink-p<span class="html-tag">&lt;/code&gt;</span> and get the path it points to using <span class="html-tag">&lt;code&gt;</span>file-truename<span class="html-tag">&lt;/code&gt;</span>:</td></tr><tr><td class="line-number" value="497"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="498"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="499"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(file-symlink-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d"<span class="html-tag">&lt;/span&gt;</span>)         <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>.dotfiles/.emacs.d<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="500"></td><td class="line-content">(file-symlink-p <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span>) <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>nil<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="501"></td><td class="line-content">(file-truename <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"~/.emacs.d/init.el"<span class="html-tag">&lt;/span&gt;</span>)  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>/home/daviwil/.dotfiles/.emacs.d/init.el<span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="502"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="503"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="504"></td><td class="line-content"><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Copying-and-Naming.html" rel="noreferrer noopener">https://www.gnu.org/software/emacs/manual/html_node/emacs/Copying-and-Naming.html</a>"&gt;</span>Emacs Lisp Manual: Copying, Naming, and Renaming Files<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="505"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="506"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="507"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="508"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">example-creating-symbolic-links-for-all-configuration-files</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#example-creating-symbolic-links-for-all-configuration-files" rel="noreferrer noopener">#example-creating-symbolic-links-for-all-configuration-files</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>Example: Creating symbolic links for all configuration files<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org054c9d5</span>"&gt;</span></td></tr><tr><td class="line-number" value="509"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="510"></td><td class="line-content">Here&amp;rsquo;s where everything in this episode finally comes together!</td></tr><tr><td class="line-number" value="511"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="512"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="513"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="514"></td><td class="line-content">We&amp;rsquo;re going to implement a more elaborate algorithm that will create symbolic links at the optimal level in the home directory so that we don&amp;rsquo;t need to create a link for every single file.</td></tr><tr><td class="line-number" value="515"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="516"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="517"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="518"></td><td class="line-content">If you&amp;rsquo;ve ever used GNU Stow, this will look pretty familiar!</td></tr><tr><td class="line-number" value="519"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="520"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="521"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="522"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">the-process</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#the-process" rel="noreferrer noopener">#the-process</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>The Process<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org334650f</span>"&gt;</span></td></tr><tr><td class="line-number" value="523"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="524"></td><td class="line-content">This is what we&amp;rsquo;ll do:</td></tr><tr><td class="line-number" value="525"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="526"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="527"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="528"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>Loop over all files in <span class="html-tag">&lt;code&gt;</span>dotcrafter-config-files-directory<span class="html-tag">&lt;/code&gt;</span><span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="529"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>For each file, break the path into pieces for each directory up to the filename<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="530"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>For each piece of the file&amp;rsquo;s path, check if the folder exists<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="531"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>If it exists, check if it&amp;rsquo;s a symbolic link that points to the matching directory in the config folder<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="532"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span>If it doesn&amp;rsquo;t exist, create the symlink there<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="533"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="534"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="535"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="536"></td><td class="line-content">Here&amp;rsquo;s a clearer depicton of what this means:</td></tr><tr><td class="line-number" value="537"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="538"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="539"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>~/.dotfiles/.files/.local/share/applications/Emacs.desktop</td></tr><tr><td class="line-number" value="540"></td><td class="line-content">                 ~/.local/share/applications/Emacs.desktop</td></tr><tr><td class="line-number" value="541"></td><td class="line-content">                  L .local exists? YES</td></tr><tr><td class="line-number" value="542"></td><td class="line-content">                         L share exists? YES</td></tr><tr><td class="line-number" value="543"></td><td class="line-content">                               L applications exists? NO, create link!<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="544"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="545"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="546"></td><td class="line-content"><span class="html-tag">&lt;h3&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">the-code</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#the-code" rel="noreferrer noopener">#the-code</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>The Code<span class="html-tag">&lt;/h3&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-3</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org9bbf99d</span>"&gt;</span></td></tr><tr><td class="line-number" value="547"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="548"></td><td class="line-content">Let&amp;rsquo;s walk through the code line by line before running it!</td></tr><tr><td class="line-number" value="549"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="550"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="551"></td><td class="line-content"><span class="html-tag">&lt;ul <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-ul</span>"&gt;</span></td></tr><tr><td class="line-number" value="552"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>dotcrafter-link-config-files<span class="html-tag">&lt;/code&gt;</span>: The user-facing function that links the whole config directory<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="553"></td><td class="line-content"><span class="html-tag">&lt;li&gt;</span><span class="html-tag">&lt;code&gt;</span>dotcrafter-link-config-file<span class="html-tag">&lt;/code&gt;</span>: The &amp;ldquo;internal&amp;rdquo; function that handles linking a single file<span class="html-tag">&lt;/li&gt;</span></td></tr><tr><td class="line-number" value="554"></td><td class="line-content"><span class="html-tag">&lt;/ul&gt;</span></td></tr><tr><td class="line-number" value="555"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="556"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>dotcrafter--link-config-file<span class="html-tag">&lt;/span&gt;</span> (config-file)</td></tr><tr><td class="line-number" value="557"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Get the "path parts", basically the name of each directory and file in the<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="558"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>path of config-file<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="559"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>let*<span class="html-tag">&lt;/span&gt;</span> ((path-parts</td></tr><tr><td class="line-number" value="560"></td><td class="line-content">          (split-string (file-relative-name (expand-file-name config-file)</td></tr><tr><td class="line-number" value="561"></td><td class="line-content">                                            (dotcrafter--resolve-config-files-path))</td></tr><tr><td class="line-number" value="562"></td><td class="line-content">                        <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/"<span class="html-tag">&lt;/span&gt;</span> t))</td></tr><tr><td class="line-number" value="563"></td><td class="line-content">         (current-path nil))</td></tr><tr><td class="line-number" value="564"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Check each "part" of the path to find the right place to create the symlink.<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="565"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Whenever path-parts is nil, stop looping!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="566"></td><td class="line-content">    (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>while<span class="html-tag">&lt;/span&gt;</span> path-parts</td></tr><tr><td class="line-number" value="567"></td><td class="line-content">      <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Create the current path using the first part and remove it from the<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="568"></td><td class="line-content">      <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>front of the list for future iterations<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="569"></td><td class="line-content">      (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> current-path (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>if<span class="html-tag">&lt;/span&gt;</span> current-path</td></tr><tr><td class="line-number" value="570"></td><td class="line-content">                             (concat current-path <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/"<span class="html-tag">&lt;/span&gt;</span> (car path-parts))</td></tr><tr><td class="line-number" value="571"></td><td class="line-content">                           (car path-parts)))</td></tr><tr><td class="line-number" value="572"></td><td class="line-content">      (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> path-parts (cdr path-parts))</td></tr><tr><td class="line-number" value="573"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="574"></td><td class="line-content">      <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Figure out whether the current source path can be linked to the target path<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="575"></td><td class="line-content">      (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>let<span class="html-tag">&lt;/span&gt;</span> ((source-path (expand-file-name (concat dotcrafter-config-files-directory <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"/"<span class="html-tag">&lt;/span&gt;</span> current-path)</td></tr><tr><td class="line-number" value="576"></td><td class="line-content">                                           dotcrafter-dotfiles-folder))</td></tr><tr><td class="line-number" value="577"></td><td class="line-content">            (target-path (expand-file-name current-path dotcrafter-output-directory)))</td></tr><tr><td class="line-number" value="578"></td><td class="line-content">        <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>If the file or directory exists, is it a symbolic link?<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="579"></td><td class="line-content">        (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>if<span class="html-tag">&lt;/span&gt;</span> (file-symlink-p target-path)</td></tr><tr><td class="line-number" value="580"></td><td class="line-content">            <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>If the symbolic link exists, does it point to the source-path?<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="581"></td><td class="line-content">            (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>if<span class="html-tag">&lt;/span&gt;</span> (string-equal source-path (file-truename target-path))</td></tr><tr><td class="line-number" value="582"></td><td class="line-content">                <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Clear path-parts to stop looping<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="583"></td><td class="line-content">                (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> path-parts '())</td></tr><tr><td class="line-number" value="584"></td><td class="line-content">              (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-warning</span>"&gt;</span>error<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>"Path already exists with different symlink! %s"<span class="html-tag">&lt;/span&gt;</span> target-path))</td></tr><tr><td class="line-number" value="585"></td><td class="line-content">          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>If the target path is an existing directory, we need to keep<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="586"></td><td class="line-content">          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>looping, otherwise we can create a symlink here!<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="587"></td><td class="line-content">          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Otherwise, the file is probably a directory so keep looping<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="588"></td><td class="line-content">          (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>when<span class="html-tag">&lt;/span&gt;</span> (not (file-directory-p target-path))</td></tr><tr><td class="line-number" value="589"></td><td class="line-content">            <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Create a symbolic link to the source-path and<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="590"></td><td class="line-content">            <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>clear the path-parts so that we stop looping<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="591"></td><td class="line-content">            (make-symbolic-link source-path target-path)</td></tr><tr><td class="line-number" value="592"></td><td class="line-content">            (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>setq<span class="html-tag">&lt;/span&gt;</span> path-parts '())))))))</td></tr><tr><td class="line-number" value="593"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="594"></td><td class="line-content">(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>dotcrafter-link-config-files<span class="html-tag">&lt;/span&gt;</span> ()</td></tr><tr><td class="line-number" value="595"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>interactive<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="596"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>let<span class="html-tag">&lt;/span&gt;</span> ((config-files</td></tr><tr><td class="line-number" value="597"></td><td class="line-content">         (directory-files-recursively</td></tr><tr><td class="line-number" value="598"></td><td class="line-content">          (dotcrafter--resolve-config-files-path)</td></tr><tr><td class="line-number" value="599"></td><td class="line-content">          <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-string</span>"&gt;</span>""<span class="html-tag">&lt;/span&gt;</span>)))</td></tr><tr><td class="line-number" value="600"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Ensure that the expected output directories are already<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="601"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>created so that links will be created inside<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="602"></td><td class="line-content">    (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>dolist<span class="html-tag">&lt;/span&gt;</span> (dir dotcrafter-ensure-output-directories)</td></tr><tr><td class="line-number" value="603"></td><td class="line-content">      (make-directory (expand-file-name dir dotcrafter-output-directory) t))</td></tr><tr><td class="line-number" value="604"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="605"></td><td class="line-content">    <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment-delimiter</span>"&gt;</span>;; <span class="html-tag">&lt;/span&gt;</span><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-comment</span>"&gt;</span>Link all of the source config files to the output path<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="606"></td><td class="line-content">    (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>dolist<span class="html-tag">&lt;/span&gt;</span> (file config-files)</td></tr><tr><td class="line-number" value="607"></td><td class="line-content">      (dotcrafter--link-config-file file))))<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="608"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="609"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="610"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">the-final-code-in-action</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#the-final-code-in-action" rel="noreferrer noopener">#the-final-code-in-action</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>The final code in action<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org85d56f7</span>"&gt;</span></td></tr><tr><td class="line-number" value="611"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="612"></td><td class="line-content">One last piece will bring together everything we&amp;rsquo;ve done in the past few episodes is this function:</td></tr><tr><td class="line-number" value="613"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="614"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="615"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>(<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>defun<span class="html-tag">&lt;/span&gt;</span> <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-function-name</span>"&gt;</span>dotcrafter-update-dotfiles<span class="html-tag">&lt;/span&gt;</span> ()</td></tr><tr><td class="line-number" value="616"></td><td class="line-content">  <span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>"Generate and link configuration files to the output directory.<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="617"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="618"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>This command handles the full process of \"tangling\" Org Mode<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="619"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>files containing configuration blocks and creating symbolic links<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="620"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>to those configuration files in the output directory, typically<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="621"></td><td class="line-content"><span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-doc</span>"&gt;</span>the user's home directory."<span class="html-tag">&lt;/span&gt;</span></td></tr><tr><td class="line-number" value="622"></td><td class="line-content">  (<span class="html-tag">&lt;span <span class="html-attribute-name">class</span>="<span class="html-attribute-value">org-keyword</span>"&gt;</span>interactive<span class="html-tag">&lt;/span&gt;</span>)</td></tr><tr><td class="line-number" value="623"></td><td class="line-content">  (dotcrafter-tangle-org-files)</td></tr><tr><td class="line-number" value="624"></td><td class="line-content">  (dotcrafter-link-config-files)</td></tr><tr><td class="line-number" value="625"></td><td class="line-content">  (dotcrafter--update-gitignore))<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="626"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="627"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="628"></td><td class="line-content">This will tangle all of our Org configuration files, link all output files to the home directory, and update the <span class="html-tag">&lt;code&gt;</span>.gitignore<span class="html-tag">&lt;/code&gt;</span> to ignore any of the generated files in the repo.</td></tr><tr><td class="line-number" value="629"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="630"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="631"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="632"></td><td class="line-content">Let&amp;rsquo;s try it all out!</td></tr><tr><td class="line-number" value="633"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="634"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="635"></td><td class="line-content"><span class="html-tag">&lt;pre&gt;</span>emacs -Q --batch -l demo.el<span class="html-tag">&lt;/pre&gt;</span></td></tr><tr><td class="line-number" value="636"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="637"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="638"></td><td class="line-content">We can also run this function multiple times and it will work just fine!</td></tr><tr><td class="line-number" value="639"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="640"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="641"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="642"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">id</span>="<span class="html-attribute-value">whatrsquos-next</span>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">anchor</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/learning-emacs-lisp/managing-files-and-directories/#whatrsquos-next" rel="noreferrer noopener">#whatrsquos-next</a>"&gt;</span>¶<span class="html-tag">&lt;/a&gt;</span>What&amp;rsquo;s next?<span class="html-tag">&lt;/h2&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">outline-text-2</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">text-org4399594</span>"&gt;</span></td></tr><tr><td class="line-number" value="643"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="644"></td><td class="line-content">Now that we&amp;rsquo;ve got a functioning package, it&amp;rsquo;s time to take things to the next level by creating major and minor modes for it!</td></tr><tr><td class="line-number" value="645"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="646"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="647"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="648"></td><td class="line-content">In the next episode, I&amp;rsquo;ll show you how to create a minor mode to gracefully handle automatic Org file tangling.</td></tr><tr><td class="line-number" value="649"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="650"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="651"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="652"></td><td class="line-content">In the following episodes, we&amp;rsquo;ll create a major mode that provides a user interface for the package and then start polishing it up to be published on MELPA!</td></tr><tr><td class="line-number" value="653"></td><td class="line-content"><span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="654"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="655"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">list-form center</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">list-form-title</span>"&gt;</span>Subscribe to the System Crafters Newsletter!<span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;form <span class="html-attribute-name">method</span>="<span class="html-attribute-value">POST</span>" <span class="html-attribute-name">action</span>="<span class="html-attribute-value">https://www.simplelists.com/subscribe.php</span>"&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">hidden</span>" <span class="html-attribute-name">name</span>="<span class="html-attribute-value">format</span>" <span class="html-attribute-name">value</span>="<span class="html-attribute-value">text</span>"/&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">hidden</span>" <span class="html-attribute-name">name</span>="<span class="html-attribute-value">action</span>" <span class="html-attribute-name">value</span>="<span class="html-attribute-value">subscribe</span>"/&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">hidden</span>" <span class="html-attribute-name">name</span>="<span class="html-attribute-value">list</span>" <span class="html-attribute-name">value</span>="<span class="html-attribute-value">news@lists.systemcrafters.net</span>"/&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">list-form-message</span>"&gt;</span>Stay up to date with the latest System Crafters news and updates!  Read the <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/newsletter/" rel="noreferrer noopener">/newsletter/</a>"&gt;</span>Newsletter<span class="html-tag">&lt;/a&gt;</span> page for more information.<span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">column</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row center list-form-label</span>"&gt;</span>Name (optional)<span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row</span>"&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text</span>" <span class="html-attribute-name">name</span>="<span class="html-attribute-value">name</span>"/&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">column</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row center list-form-label</span>"&gt;</span>Email Address<span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row</span>"&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text</span>" <span class="html-attribute-name">name</span>="<span class="html-attribute-value">email</span>"/&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div&gt;</span><span class="html-tag">&lt;input <span class="html-attribute-name">type</span>="<span class="html-attribute-value">submit</span>" <span class="html-attribute-name">value</span>="<span class="html-attribute-value">Subscribe!</span>"/&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/form&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;footer <span class="html-attribute-name">class</span>="<span class="html-attribute-value">site-footer</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">container</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">row</span>"&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">column</span>"&gt;</span><span class="html-tag">&lt;p&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/privacy-policy/" rel="noreferrer noopener">/privacy-policy/</a>"&gt;</span>Privacy Policy<span class="html-tag">&lt;/a&gt;</span> · <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/credits/" rel="noreferrer noopener">/credits/</a>"&gt;</span>Credits<span class="html-tag">&lt;/a&gt;</span> · <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://systemcrafters.net/rss/" rel="noreferrer noopener">/rss/</a>"&gt;</span>RSS Feeds<span class="html-tag">&lt;/a&gt;</span> · <span class="html-tag">&lt;a <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">me</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://fosstodon.org/@daviwil" rel="noreferrer noopener">https://fosstodon.org/@daviwil</a>"&gt;</span>Fediverse<span class="html-tag">&lt;/a&gt;</span><span class="html-tag">&lt;/p&gt;</span><span class="html-tag">&lt;p&gt;</span>© 2021-2024 · System Crafters LLC<span class="html-tag">&lt;/p&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">column align-right</span>"&gt;</span><span class="html-tag">&lt;p&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://codeberg.org/SystemCrafters/systemcrafters.net" rel="noreferrer noopener">https://codeberg.org/SystemCrafters/systemcrafters.net</a>"&gt;</span><span class="html-tag">&lt;img <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://systemcrafters.net/img/codeberg.png" rel="noreferrer noopener">/img/codeberg.png</a>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">width: 120px</span>" <span class="html-attribute-name">alt</span>="<span class="html-attribute-value">Contribute on Codeberg</span>"/&gt;</span><span class="html-tag">&lt;/a&gt;</span><span class="html-tag">&lt;/p&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/div&gt;</span><span class="html-tag">&lt;/footer&gt;</span><span class="html-tag">&lt;/body&gt;</span><span class="html-tag">&lt;/html&gt;</span><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>